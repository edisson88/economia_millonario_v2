<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Fundamentos Econ√≥micos ‚Äì ¬øQui√©n quiere ser millonario?</title>
  <style>
    :root{
      --bg:#0a0f2d;
      --panel:#11184a;
      --accent:#f7b500;
      --accent2:#1ee3cf;
      --danger:#ff5757;
      --ok:#47d147;
      --text:#eef2ff;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial;
      background: radial-gradient(1200px 600px at 50% -20%, #1a237e 0%, #0a0f2d 60%);
      color:var(--text);
      min-height:100dvh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
    }
    .app{
      width:100%;
      max-width:820px;
      background:linear-gradient(180deg,var(--panel),#0d1340);
      border:2px solid rgba(255,255,255,.08);
      border-radius:18px;
      box-shadow:0 24px 80px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.05);
      overflow:hidden;
    }
    header{
      padding:16px 18px;
      border-bottom:1px solid rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      gap:12px;
      justify-content:space-between;
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,0));
    }
    .brand{
      display:flex;align-items:center;gap:12px;
    }
    .brand .logo{
      width:42px;height:42px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff 0%, #f7b500 35%, #8e44ad 75%, #11184a 100%);
      border:2px solid rgba(255,255,255,.25);
      box-shadow:0 8px 18px rgba(0,0,0,.4), inset 0 0 12px rgba(0,0,0,.35);
    }
    h1{
      font-size:clamp(18px,3.2vw,22px);
      margin:0;
      letter-spacing:.3px;
    }
    .scoreboard{
      display:flex;gap:14px;align-items:center;flex-wrap:wrap;
    }
    .pill{
      background:rgba(255,255,255,.07);
      padding:8px 12px;border-radius:999px;
      font-weight:600;
      display:flex;gap:8px;align-items:center;
      border:1px solid rgba(255,255,255,.12);
    }
    .pill b{color:var(--accent)}
    .progress{
      position:relative;
      width:min(320px,60vw);
      height:10px;
      background:rgba(255,255,255,.08);
      border-radius:8px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.1);
    }
    .bar{
      position:absolute;inset:0 0 0 auto;
      width:0;background:linear-gradient(90deg,var(--accent),#ffd54f);
    }
    main{padding:18px}
    .card{
      background:rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.09);
      border-radius:16px;
      padding:16px;
      box-shadow:inset 0 0 16px rgba(0,0,0,.25);
    }
    .level{font-size:14px;opacity:.9;margin:0 0 8px}
    .question{
      font-size:clamp(18px,2.6vw,22px);
      margin:6px 0 14px;
      font-weight:700;
      line-height:1.3;
    }
    .choices{display:grid;gap:10px}
    .btn{
      appearance:none;border:0;cursor:pointer;
      padding:12px 14px;border-radius:12px;
      font-weight:700;
      color:#0b102e;
      background:linear-gradient(180deg,#fff,#e6e6e6);
      border:1px solid #dfe2f3;
      text-align:left;
      box-shadow:0 4px 10px rgba(0,0,0,.25);
      transition:transform .06s ease, box-shadow .2s ease, background .2s ease;
      display:flex;align-items:center;gap:10px;
    }
    .btn:active{transform:translateY(1px)}
    .btn span.key{
      width:28px;height:28px;border-radius:8px;
      background:linear-gradient(180deg,#11184a,#0a0f2d);
      color:var(--text);display:inline-grid;place-items:center;
      font-weight:800;border:1px solid rgba(255,255,255,.18);
    }
    .btn.correct{background:linear-gradient(180deg,#d6ffd6,#a8f3a8);border-color:#b7efb7}
    .btn.wrong{background:linear-gradient(180deg,#ffd6d6,#f5b1b1);border-color:#ffb8b8}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .action{
      background:linear-gradient(180deg,#1ee3cf,#00c7b2);
      color:#012a2a;border:0;border-radius:999px;
      padding:10px 14px;font-weight:800;cursor:pointer;
      box-shadow:0 6px 20px rgba(0,0,0,.35);
    }
    .action.secondary{background:linear-gradient(180deg,#ffd54f,#f7b500);color:#392400}
    .action.ghost{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,.18)}
    .feedback{
      margin-top:12px;padding:12px;border-radius:12px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      display:none;
    }
    .feedback.show{display:block}
    .muted{opacity:.85;font-size:14px}
    .final{
      text-align:center;padding:24px 10px;
    }
    .final h2{margin:10px 0 8px}
    .final .big{font-size:38px;line-height:1}
    footer{
      padding:12px 16px;
      border-top:1px solid rgba(255,255,255,.08);
      display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;
      font-size:13.5px;opacity:.9
    }
    .tiny{font-size:12.5px;opacity:.8}
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Quiz de Fundamentos Econ√≥micos">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>¬øQui√©n quiere ser millonario? ¬∑ Fundamentos econ√≥micos</h1>
          <div class="tiny">Funciona offline. Un solo archivo HTML.</div>
        </div>
      </div>
      <div class="scoreboard">
        <div class="pill">Puntos: <b id="score">0</b></div>
        <div class="pill">Pregunta: <b><span id="qNow">1</span>/<span id="qTotal">12</span></b></div>
        <div class="progress" aria-label="Progreso">
          <div class="bar" id="bar"></div>
        </div>
      </div>
    </header>

    <main>
      <section id="stage" class="card" aria-live="polite"></section>
    </main>

    <footer>
      <div class="muted">
        <b>Reglas de puntaje:</b> acierto al primer intento = <b>+10</b> pts ¬∑ acierto despu√©s de usar <em>Clave</em> = <b>+7</b> pts ¬∑ acierto tras un fallo (sin clave) = <b>+8</b> pts.
      </div>
      <button class="action ghost" id="restartBtn" aria-label="Reiniciar juego">Reiniciar</button>
    </footer>
  </div>

  <!-- Configuraci√≥n de Google Forms (prefilled) -->
  <script>
    const FORM_BASE = "https://docs.google.com/forms/d/e/1FAIpQLSeXzksCUVTdSiV0kCBmEfDnUYNZna3-fJrWDBRuFH508qRYAw/viewform?usp=pp_url";
    const ENTRY = {
      Nombre_Completo: "entry.1940417174",
      ID_Alumno: "entry.1397598336",
      Puntaje: "entry.1028970106",
      Maximo_Puntos: "entry.1662610210",
      Porcentaje: "entry.139833708",
      Usos_Clave: "entry.1853560057",
      Aciertos_despues_de_fallo: "entry.265591452",
      Total_Preguntas: "entry.1633983044"
    };
  </script>

  <script>
    // Overlay para capturar identidad al inicio
    function renderOverlayStart() {
      const overlay = document.createElement('div');
      overlay.id = "overlayStart";
      overlay.innerHTML = `
        <div style="position:fixed;inset:0;background:rgba(10,15,45,.86);display:grid;place-items:center;padding:16px;z-index:9999">
          <div style="width:min(560px,92vw);background:linear-gradient(180deg,#11184a,#0d1340);border:1px solid rgba(255,255,255,.14);border-radius:16px;padding:18px;box-shadow:0 24px 80px rgba(0,0,0,.6)">
            <h2 style="margin:0 0 8px">Antes de iniciar</h2>
            <p class="tiny" style="margin:0 0 12px">Ingresa tus datos para registrar el intento.</p>
            <div style="display:grid;gap:10px">
              <label>Nombre completo
                <input id="inpName" type="text" inputmode="text" placeholder="Nombres y Apellidos" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:#fff;outline:none">
              </label>
              <label>Documento (ID de estudiante)
                <input id="inpId" type="text" inputmode="numeric" placeholder="N√∫mero de documento sin puntos ni comas" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:#fff;outline:none">
              </label>
            </div>
            <div class="actions" style="margin-top:14px;justify-content:flex-end">
              <button class="action ghost" id="skipIdentity">Omitir</button>
              <button class="action" id="startNow">Empezar</button>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(overlay);
      const startNow = overlay.querySelector('#startNow');
      const skipBtn = overlay.querySelector('#skipIdentity');
      startNow.addEventListener('click', ()=>{
        const name = overlay.querySelector('#inpName').value.trim();
        const id = overlay.querySelector('#inpId').value.trim();
        if(!name || !id){ alert("Por favor completa Nombre e ID."); return; }
        localStorage.setItem('quiz_name', name);
        localStorage.setItem('quiz_id', id);
        overlay.remove();
      });
      skipBtn.addEventListener('click', ()=> overlay.remove());
    }
    window.addEventListener('load', renderOverlayStart);

    const data = [
      {
        q: "Los Factores de Producci√≥n son:",
        choices: [
          "Tierra, Capital, Trabajo y Experiencia",
          "Tierra, Capital, Trabajo y Tecnolog√≠a o Emprendimiento",
          "Tierra, Capital, Renta y Emprendimiento",
          "Tierra, Dinero, Renta y Trabajo"
        ],
        correct: 1,
        feedback: "Los factores de producci√≥n b√°sicos son tierra, trabajo, capital y tecnolog√≠a/emprendimiento; son la base para generar bienes y servicios."
      },
      {
        q: "Ciencia que estudia los recursos, la creaci√≥n de riqueza y la producci√≥n, distribuci√≥n y consumo de bienes y servicios, para satisfacer las necesidades humanas, esta definici√≥n corresponde a:",
        choices: ["Econom√≠a","Administraci√≥n","Administraci√≥n Econ√≥mica","Sociolog√≠a"],
        correct: 0,
        feedback: "La econom√≠a analiza c√≥mo se producen, distribuyen y consumen los bienes y servicios para cubrir necesidades humanas."
      },
      {
        q: "La econom√≠a define y establece las relaciones entre la trilog√≠a:",
        choices: ["Producci√≥n, Distribuci√≥n y Consumo","Producci√≥n, Distribuci√≥n y Capital","Productos, Servicios y Consumos","Producci√≥n, Renta y Trabajo"],
        correct: 0,
        feedback: "La trilog√≠a fundamental de la econom√≠a es producci√≥n, distribuci√≥n y consumo."
      },
      {
        q: "Es la ciencia social que se ocupa de la administraci√≥n de los recursos escasos en la sociedad humana:",
        choices: ["Econom√≠a Financiera","Administraci√≥n Econ√≥mica","Econom√≠a","Contabilidad"],
        correct: 2,
        feedback: "La econom√≠a es una ciencia social porque estudia c√≥mo administrar recursos escasos para satisfacer necesidades."
      },
      {
        q: "¬øCu√°l es la importancia de los factores de producci√≥n?",
        choices: ["Permiten satisfacer las necesidades de los consumidores","Son de gran ayuda para el crecimiento econ√≥mico","Todas son verdaderas","Solo sirven para medir la riqueza"],
        correct: 2,
        feedback: "Los factores de producci√≥n son clave porque permiten satisfacer necesidades y promueven el crecimiento econ√≥mico."
      },
      {
        q: "La microeconom√≠a estudia:",
        choices: ["El comportamiento de los sujetos econ√≥micos individuales (hogares, empresas)","El comportamiento de la Econom√≠a plena y plural","El comportamiento de la Econom√≠a general y expl√≠cita","El comercio internacional"],
        correct: 0,
        feedback: "La microeconom√≠a se centra en decisiones de consumidores y empresas en mercados espec√≠ficos."
      },
      {
        q: "Cada sociedad debe realizar como m√≠nimo tres elecciones b√°sicas:",
        choices: ["Qu√© producir, C√≥mo producir y D√≥nde producir","Qu√© producir, C√≥mo producir y Para qui√©n producir","Qu√© producir, C√≥mo producir y Cu√°nto producir","Qu√© producir, Cu√°ndo producir y C√≥mo distribuir"],
        correct: 1,
        feedback: "Las tres preguntas centrales de toda econom√≠a son qu√© producir, c√≥mo producir y para qui√©n producir."
      },
      {
        q: "¬øCu√°l es la importancia de la econom√≠a?",
        choices: ["Permite administrar los recursos escasos de manera eficiente","Solo es relevante para los empresarios","No tiene importancia en la sociedad","Sirve √∫nicamente para generar dinero"],
        correct: 0,
        feedback: "La econom√≠a ayuda a gestionar los recursos escasos de forma eficiente para toda la sociedad."
      },
      {
        q: "La macroeconom√≠a estudia:",
        choices: ["Los precios de un solo mercado","El comportamiento econ√≥mico de los individuos","La econom√≠a en su conjunto: inflaci√≥n, desempleo, crecimiento","La contabilidad empresarial"],
        correct: 2,
        feedback: "La macroeconom√≠a analiza fen√≥menos globales como inflaci√≥n, desempleo y crecimiento econ√≥mico."
      },
      {
        q: "Un ejemplo de recurso natural como factor de producci√≥n es:",
        choices: ["Un tractor","Un terreno agr√≠cola","Una computadora","El dinero en efectivo"],
        correct: 1,
        feedback: "La tierra y los recursos naturales como bosques, r√≠os o terrenos son factores b√°sicos de producci√≥n."
      },
      {
        q: "El capital en econom√≠a se entiende como:",
        choices: ["Solo el dinero disponible","Los bienes utilizados para producir otros bienes","Las materias primas","La renta de los empresarios"],
        correct: 1,
        feedback: "El capital no es solo dinero, sino m√°quinas, herramientas y bienes que facilitan la producci√≥n."
      },
      {
        q: "El objetivo central de la econom√≠a es:",
        choices: ["Producir riqueza infinita","Satisfacer necesidades humanas con recursos escasos","Controlar a los empresarios","Incrementar √∫nicamente los impuestos"],
        correct: 1,
        feedback: "La econom√≠a busca satisfacer necesidades mediante la correcta asignaci√≥n de recursos limitados."
      }
    ];

    // State
    const stage = document.getElementById('stage');
    const scoreEl = document.getElementById('score');
    const qNowEl = document.getElementById('qNow');
    const qTotalEl = document.getElementById('qTotal');
    const barEl = document.getElementById('bar');
    const restartBtn = document.getElementById('restartBtn');

    qTotalEl.textContent = data.length;

    let i = 0;
    let score = 0;
    let clueUsed = false;
    let triedOnce = false;
    let finished = false;
    // Contadores para formulario
    let cluesCount = 0;          // veces que se us√≥ "Clave" en una pregunta (solo una vez por pregunta)
    let wrongFirstCount = 0;     // aciertos tras fallo (sin usar Clave)

    function pct(n, d){ return Math.round((n/d)*100); }

    function renderQuestion(){
      const d = data[i];
      qNowEl.textContent = i+1;
      const progressPct = ((i) / data.length) * 100;
      barEl.style.width = progressPct + "%";

      stage.innerHTML = `
        <div class="level">Nivel ${i+1}</div>
        <div class="question">${i+1}) ${d.q}</div>
        <div class="choices" role="group" aria-label="Opciones de respuesta">
          ${d.choices.map((c,idx)=>`
            <button class="btn" data-idx="${idx}" aria-label="Opci√≥n ${'ABCD'[idx]}: ${c}">
              <span class="key">${'ABCD'[idx]}</span> ${c}
            </button>
          `).join('')}
        </div>
        <div class="actions">
          <button class="action secondary" id="clueBtn" aria-label="Mostrar clave">Mostrar Clave</button>
          <button class="action ghost" id="skipBtn" aria-label="Saltar pregunta">Saltar</button>
        </div>
        <div class="feedback" id="fb"></div>
      `;

      // attach handlers
      stage.querySelectorAll('.btn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          if(finished) return;
          const pick = Number(btn.dataset.idx);
          const correct = pick === d.correct;
          const fb = document.getElementById('fb');

          // remove prior classes
          stage.querySelectorAll('.btn').forEach(b=>b.classList.remove('correct','wrong'));

          if(correct){
            btn.classList.add('correct');
            // marcar si acert√≥ tras fallar (sin clave)
            if(triedOnce && !clueUsed){ wrongFirstCount++; }
            // scoring
            let add = 10;
            if(clueUsed) add = 7;
            else if(triedOnce) add = 8;
            score += add;
            scoreEl.textContent = score;

            fb.classList.add('show');
            fb.innerHTML = `‚úÖ <b>¬°Correcto!</b> (+${add} pts)<br>${d.feedback}`;

            // next after short delay
            setTimeout(()=>{
              clueUsed = false; triedOnce = false;
              i++;
              if(i < data.length){
                renderQuestion();
              }else{
                renderFinal();
              }
            }, 950);
          }else{
            btn.classList.add('wrong');
            triedOnce = true;
            fb.classList.add('show');
            fb.innerHTML = `‚ùå <b>Incorrecto.</b> Puedes intentar otra opci√≥n o usar <em>Clave</em>.`;
          }
        });
      });

      document.getElementById('clueBtn').addEventListener('click', ()=>{
        if(!clueUsed){ cluesCount++; }
        clueUsed = true;
        const fb = document.getElementById('fb');
        fb.classList.add('show');
        fb.innerHTML = `üß† <b>Clave:</b> ${data[i].feedback}`;
      });

      document.getElementById('skipBtn').addEventListener('click', ()=>{
        // no puntos por saltar
        clueUsed = false; triedOnce = false;
        i++;
        if(i < data.length) renderQuestion();
        else renderFinal();
      });
    }

    function renderFinal(){
      finished = true;
      qNowEl.textContent = data.length;
      barEl.style.width = "100%";
      const max = data.length * 10;
      const pctScore = pct(score, max);
      stage.innerHTML = `
        <div class="final">
          <h2>¬°Has terminado! üéâ</h2>
          <p class="big"><b>${score}</b> / ${max} puntos</p>
          <p>Tu efectividad fue del <b>${pctScore}%</b>.</p>
          <div class="feedback show" style="display:inline-block;margin-top:14px;text-align:left">
            <b>Sugerencia:</b> repasa las preguntas donde usaste <em>Clave</em> o fallaste para consolidar conceptos.
            <div class="tiny" style="margin-top:8px;opacity:.8">
              Usos de Clave: <b>${cluesCount}</b> ¬∑ Aciertos tras fallo: <b>${wrongFirstCount}</b>
            </div>
          </div>
          <div class="actions" style="justify-content:center;margin-top:16px;gap:12px">
            <button class="action secondary" id="sendResults">Enviar resultados</button>
            <button class="action" id="playAgain">Jugar de nuevo</button>
          </div>
          <div class="tiny" style="margin-top:10px;opacity:.75">Si no se abre el formulario, verifica que el navegador permita abrir enlaces externos.</div>
        </div>
      `;
      document.getElementById('playAgain').addEventListener('click', resetGame);

      // Handler para enviar resultados a Google Forms
      const sendBtn = document.getElementById('sendResults');
      if(sendBtn){
        sendBtn.addEventListener('click', ()=>{
          const name = (localStorage.getItem('quiz_name')||"").trim();
          const sid = (localStorage.getItem('quiz_id')||"").trim();
          if(!name || !sid){
            if(!confirm("No registraste Nombre e ID al inicio. ¬øDeseas continuar sin esos datos?")) return;
          }
          const params = new URLSearchParams();
          if(name) params.set(ENTRY.Nombre_Completo, name);
          if(sid) params.set(ENTRY.ID_Alumno, sid);
          params.set(ENTRY.Puntaje, String(score));
          params.set(ENTRY.Maximo_Puntos, String(max));
          params.set(ENTRY.Porcentaje, String(pctScore));
          params.set(ENTRY.Usos_Clave, String(cluesCount));
          params.set(ENTRY.Aciertos_despues_de_fallo, String(wrongFirstCount));
          params.set(ENTRY.Total_Preguntas, String(data.length));
          const url = FORM_BASE + "&" + params.toString();
          window.location.href = url;
        });
      }
    }

    function resetGame(){
      i = 0; score = 0; clueUsed = false; triedOnce = false; finished = false;
      scoreEl.textContent = score;
      renderQuestion();
    }

    restartBtn.addEventListener('click', resetGame);

    // init
    renderQuestion();
  </script>
</body>
</html>
